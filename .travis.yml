language: ruby
rvm:
- 2.2.0
script:
- bundle exec rspec spec
before_script:
- gem install travis-artifacts
- cp config/database.yml.travis config/database.yml
- psql -c 'create database travis_ci_test' -U postgres
addons:
  artifacts:
    debug: true
    bucket: ga-wdi-travis-logs
    key:
      secure: Qm4b+i3Y5JUBlQlomL+B4IdE9i1tC8Vx6oh4eBzhzEHRhYDWsPhfY8rndNeh61LbdnHzlTJuASWe+HaPVTSCTg4o1lUG9cNheuwEKhMfZd5SJD+eC/QhXVi1nIfCHUdnFI0be0729PXZyJx7JLmhQdgelz5CydSSrpMkFE14b2A=
    secret:
      secure: Eep3s0KYkUZIt562vINYVFSi5a41GledkWeraW5nX3WGvpAAFg59u1Uj4ksWZ9yXiD+Q2rPDKs0nyX3bHfVgEVtCn4TvVtxBU5GaT4hpGyNzM23WX0J+MrhaUgHFsuYMBnH3h4Yo94fYhdJLO2XiAg7KfOJhfN47htebTMPca6E=
deploy:
  provider: heroku
  app: gradingwizard
  api_key:
    secure: aJH/1UV5EtTtGbJzQzpa8oEz8a8EDFkr4yOYTSwjkA8sZscVueRufAalwBG/VOBlJF3hGCqwuUzqCVTS98LbuMvnA0GhhjGPK0wKoJpBkiNO1WX1WxXs1PjQa5JqRdbNweOyu2GjLmtOJ8P4yNjmGABObZeQOiGNxzztdULr3Q0=
  run:
  - rake db:migrate
  - rake db:seed
  - restart
